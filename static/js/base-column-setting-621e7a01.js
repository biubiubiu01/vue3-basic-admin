import{_ as U}from"./base-dialog.vue_vue_type_style_index_0_lang-c459eb3d.js";import{d as $,b as R,r as G,v as x,U as j,o as i,c as k,f as l,w as n,A as p,i as m,ab as _,e as c,a4 as M,b8 as W,g as a,t as y,c6 as D,be as q,_ as H,p as J,j as K,aw as O,l as P}from"./index-3644c3c9.js";import{b as Q}from"./el-popper-d8a7d137.js";import{E as X,c as Y}from"./el-checkbox-33797f2d.js";/* empty css                  *//* empty css                        */import{E as Z,a as ee,b as te}from"./el-dropdown-item-e2d736e4.js";import{D as oe}from"./vuedraggable.umd-26863522.js";const se=u=>(J("data-v-ffdc0e36"),u=u(),K(),u),le={class:"base-column-setting"},ne={class:"base-column-content flex"},ae={class:"base-column-list flex-auto"},ce={class:"base-column-title pl15"},ue={class:"padding15 border-box"},ie={class:"base-column-choose"},de=se(()=>c("div",{class:"base-column-title pl15"},"\u5DF2\u9009\u5B57\u6BB5",-1)),re={class:"pt5 pb5 border-box base-column-choose-content"},me={key:0,class:"base-column-choose-item flex-row-center pl10 pr10"},pe=["title"],_e={class:"base-column-setting-tip"},he=$({__name:"base-column-setting",props:{tableColumns:{type:Array,default:()=>[]},filterColumns:{type:Array,default:()=>[]},showTable:{type:Boolean,default:!0},showFilter:{type:Boolean,default:!0}},emits:["update:tableColumns","update:filterColumns","columns-change"],setup(u,{emit:h}){const b=u,{proxy:w}=O(),e=R({dialogType:0,isIndeterminate:!1,checkAll:!0,checkedList:[],checkColumnList:[]}),f=G(),A=x(()=>e.dialogType===0?"\u81EA\u5B9A\u4E49\u5217\u8868\u5B57\u6BB5":"\u81EA\u5B9A\u4E49\u7B5B\u9009\u5B57\u6BB5"),d=x(()=>e.dialogType===0?b.tableColumns:b.filterColumns),C=o=>{e.dialogType=o,v(),a(f).showDialog()},L=o=>{e.checkedList=o?a(d).map(t=>t.fieldName):[],e.isIndeterminate=!1},g=o=>{const t=o.length;e.checkAll=t===a(d).length,e.isIndeterminate=t>0&&t<a(d).length},F=o=>{e.checkedList=e.checkedList.filter(t=>t!==o),g(e.checkedList)},V=()=>{if(e.checkedList.length===0){w.$messageWarning("\u8BF7\u81F3\u5C11\u52FE\u9009\u4E00\u9879\u518D\u8FDB\u884C\u8BE5\u64CD\u4F5C");return}e.dialogType===0?h("update:tableColumns",e.checkColumnList):h("update:filterColumns",e.checkColumnList),h("columns-change",e.checkColumnList.filter(o=>D(o.active)||o.active)),a(f).hideDialog()},v=()=>{e.checkedList=a(d).filter(o=>D(o.active)||o.active).map(o=>o.fieldName)};return j(()=>e.checkedList,()=>{const o=q(a(d));e.checkColumnList=o.map(t=>(t.active=e.checkedList.includes(t.fieldName),t))}),(o,t)=>{const r=H,B=Z,N=ee,T=te,E=X,I=Y,S=Q,z=U;return i(),k("div",le,[l(T,{trigger:"click"},{dropdown:n(()=>[l(N,null,{default:n(()=>[u.showTable?(i(),p(B,{key:0,onClick:t[0]||(t[0]=s=>C(0))},{default:n(()=>[l(r,{"svg-name":"column",size:14}),m("\u81EA\u5B9A\u4E49\u5217\u8868\u5B57\u6BB5 ")]),_:1})):_("",!0),u.showFilter?(i(),p(B,{key:1,onClick:t[1]||(t[1]=s=>C(1))},{default:n(()=>[l(r,{"svg-name":"filter",size:16}),m("\u81EA\u5B9A\u4E49\u7B5B\u9009 ")]),_:1})):_("",!0)]),_:1})]),default:n(()=>[l(r,{"el-name":"setting",class:"pointer base-icon-setting",size:18,hover:""})]),_:1}),l(z,{title:a(A),ref_key:"baseDialogRef",ref:f,width:"870px",saveText:"\u4FDD \u5B58",cancelText:"\u91CD \u7F6E",closeFun:v,onSave:V},{default:n(()=>[c("div",ne,[c("div",ae,[c("div",ce,[l(E,{modelValue:e.checkAll,"onUpdate:modelValue":t[2]||(t[2]=s=>e.checkAll=s),indeterminate:e.isIndeterminate,onChange:L},{default:n(()=>[m(" \u5168\u90E8\u5B57\u6BB5 ")]),_:1},8,["modelValue","indeterminate"])]),c("div",ue,[l(I,{modelValue:e.checkedList,"onUpdate:modelValue":t[3]||(t[3]=s=>e.checkedList=s),onChange:g},{default:n(()=>[(i(!0),k(M,null,W(a(d),s=>(i(),p(E,{key:s.fieldName,label:s.fieldName,class:"base-column-checkbox",title:s.fieldDesc},{default:n(()=>[m(y(s.fieldDesc),1)]),_:2},1032,["label","title"]))),128))]),_:1},8,["modelValue"])])]),c("div",ie,[de,c("div",re,[l(S,null,{default:n(()=>[l(a(oe),{modelValue:e.checkColumnList,"onUpdate:modelValue":t[4]||(t[4]=s=>e.checkColumnList=s),animation:100,"item-key":"fieldName",forceFallback:!0,handle:".move"},{item:n(({element:s})=>[s.active?(i(),k("div",me,[s.fixed?_("",!0):(i(),p(r,{key:0,"el-name":"rank",size:16,class:"move mr5",hover:""})),c("div",{class:"text-hidden w100",title:s.fieldDesc},y(s.fieldDesc),9,pe),l(r,{"el-name":"close",size:14,class:"pointer",hover:"",onClick:fe=>F(s.fieldName)},null,8,["onClick"])])):_("",!0)]),_:1},8,["modelValue"])]),_:1})])])]),c("div",_e,[m(" \u6CE8\uFF1A\u62D6\u52A8 "),l(r,{"el-name":"rank",size:14,class:"ml5 mr5"}),m(" \u56FE\u6807\u53EF\u8C03\u6574\u987A\u5E8F ")])]),_:1},8,["title"])])}}});const ye=P(he,[["__scopeId","data-v-ffdc0e36"]]);export{ye as _};
