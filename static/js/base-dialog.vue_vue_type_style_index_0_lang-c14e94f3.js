import{Y as ie,m as X,aL as ce,d as H,aR as de,s as G,bG as fe,v as _,bH as pe,o as m,c as U,e as j,B as k,C as D,g as e,t as q,f as O,w as d,A as P,E as ye,aM as me,ab as E,D as K,F as x,bI as ge,n as ve,as as ee,R as be,bz as Ce,a7 as J,r as C,bo as he,bp as Be,a9 as ke,bJ as Se,U as Y,a5 as oe,a0 as we,aw as le,b3 as Z,bm as Fe,a6 as De,aQ as Q,x as Ee,H as _e,bK as $e,az as Te,aN as Ae,aO as Ie,ai as se,ag as ae,aU as Pe,ac as Oe,aV as Re,G as Ne,ae as Le,b4 as Me,i as W,aj as Ve,bL as ze,_ as Ue}from"./index-bd68377b.js";import{_ as je}from"./index.vue_vue_type_script_setup_true_lang-127883b2.js";import{b as He}from"./el-popper-ec19954e.js";import{E as qe}from"./el-space-cf3eea44.js";const Ke=(...l)=>i=>{l.forEach(c=>{ie(c)?c(i):c.value=i})},te=Symbol("dialogInjectionKey"),ne=X({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:ce},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Ge={close:()=>!0},Je=["aria-label"],Ye=["id"],Ze=H({name:"ElDialogContent"}),Qe=H({...Ze,props:ne,emits:Ge,setup(l){const i=l,{t:c}=de(),{Close:t}=ge,{dialogRef:g,headerRef:h,bodyId:v,ns:n,style:r}=G(te),{focusTrapRef:b}=G(fe),f=Ke(b,g),B=_(()=>i.draggable);return pe(g,h,B),(a,u)=>(m(),U("div",{ref:e(f),class:D([e(n).b(),e(n).is("fullscreen",a.fullscreen),e(n).is("draggable",e(B)),e(n).is("align-center",a.alignCenter),{[e(n).m("center")]:a.center},a.customClass]),style:K(e(r)),tabindex:"-1"},[j("header",{ref_key:"headerRef",ref:h,class:D(e(n).e("header"))},[k(a.$slots,"header",{},()=>[j("span",{role:"heading",class:D(e(n).e("title"))},q(a.title),3)]),a.showClose?(m(),U("button",{key:0,"aria-label":e(c)("el.dialog.close"),class:D(e(n).e("headerbtn")),type:"button",onClick:u[0]||(u[0]=R=>a.$emit("close"))},[O(e(me),{class:D(e(n).e("close"))},{default:d(()=>[(m(),P(ye(a.closeIcon||e(t))))]),_:1},8,["class"])],10,Je)):E("v-if",!0)],2),j("div",{id:e(v),class:D(e(n).e("body"))},[k(a.$slots,"default")],10,Ye),a.$slots.footer?(m(),U("footer",{key:0,class:D(e(n).e("footer"))},[k(a.$slots,"footer")],2)):E("v-if",!0)],6))}});var We=x(Qe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const Xe=X({...ne,appendToBody:{type:Boolean,default:!1},beforeClose:{type:ve(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),xe={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ee]:l=>be(l),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},eo=(l,i)=>{const t=le().emit,{nextZIndex:g}=Ce();let h="";const v=J(),n=J(),r=C(!1),b=C(!1),f=C(!1),B=C(l.zIndex||g());let a,u;const R=he("namespace",Be),L=_(()=>{const y={},I=`--${R.value}-dialog`;return l.fullscreen||(l.top&&(y[`${I}-margin-top`]=l.top),l.width&&(y[`${I}-width`]=ke(l.width))),y}),M=_(()=>l.alignCenter?{display:"flex"}:{});function V(){t("opened")}function N(){t("closed"),t(ee,!1),l.destroyOnClose&&(f.value=!1)}function o(){t("close")}function S(){u==null||u(),a==null||a(),l.openDelay&&l.openDelay>0?{stop:a}=Z(()=>p(),l.openDelay):p()}function w(){a==null||a(),u==null||u(),l.closeDelay&&l.closeDelay>0?{stop:u}=Z(()=>T(),l.closeDelay):T()}function $(){function y(I){I||(b.value=!0,r.value=!1)}l.beforeClose?l.beforeClose(y):w()}function z(){l.closeOnClickModal&&$()}function p(){!Fe||(r.value=!0)}function T(){r.value=!1}function s(){t("openAutoFocus")}function F(){t("closeAutoFocus")}function A(y){var I;((I=y.detail)==null?void 0:I.focusReason)==="pointer"&&y.preventDefault()}l.lockScroll&&Se(r);function ue(){l.closeOnPressEscape&&$()}return Y(()=>l.modelValue,y=>{y?(b.value=!1,S(),f.value=!0,B.value=l.zIndex?B.value++:g(),oe(()=>{t("open"),i.value&&(i.value.scrollTop=0)})):r.value&&w()}),Y(()=>l.fullscreen,y=>{!i.value||(y?(h=i.value.style.transform,i.value.style.transform=""):i.value.style.transform=h)}),we(()=>{l.modelValue&&(r.value=!0,f.value=!0,S())}),{afterEnter:V,afterLeave:N,beforeLeave:o,handleClose:$,onModalClick:z,close:w,doClose:T,onOpenAutoFocus:s,onCloseAutoFocus:F,onCloseRequested:ue,onFocusoutPrevented:A,titleId:v,bodyId:n,closed:b,style:L,overlayDialogStyle:M,rendered:f,visible:r,zIndex:B}},oo=["aria-label","aria-labelledby","aria-describedby"],lo=H({name:"ElDialog",inheritAttrs:!1}),so=H({...lo,props:Xe,emits:xe,setup(l,{expose:i}){const c=l,t=De();Q({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},_(()=>!!t.title)),Q({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},_(()=>!!c.customClass));const g=Ee("dialog"),h=C(),v=C(),n=C(),{visible:r,titleId:b,bodyId:f,style:B,overlayDialogStyle:a,rendered:u,zIndex:R,afterEnter:L,afterLeave:M,beforeLeave:V,handleClose:N,onModalClick:o,onOpenAutoFocus:S,onCloseAutoFocus:w,onCloseRequested:$,onFocusoutPrevented:z}=eo(c,h);_e(te,{dialogRef:h,headerRef:v,bodyId:f,ns:g,rendered:u,style:B});const p=$e(o),T=_(()=>c.draggable&&!c.fullscreen);return i({visible:r,dialogContentRef:n}),(s,F)=>(m(),P(Re,{to:"body",disabled:!s.appendToBody},[O(Oe,{name:"dialog-fade",onAfterEnter:e(L),onAfterLeave:e(M),onBeforeLeave:e(V),persisted:""},{default:d(()=>[Te(O(e(Ae),{"custom-mask-event":"",mask:s.modal,"overlay-class":s.modalClass,"z-index":e(R)},{default:d(()=>[j("div",{role:"dialog","aria-modal":"true","aria-label":s.title||void 0,"aria-labelledby":s.title?void 0:e(b),"aria-describedby":e(f),class:D(`${e(g).namespace.value}-overlay-dialog`),style:K(e(a)),onClick:F[0]||(F[0]=(...A)=>e(p).onClick&&e(p).onClick(...A)),onMousedown:F[1]||(F[1]=(...A)=>e(p).onMousedown&&e(p).onMousedown(...A)),onMouseup:F[2]||(F[2]=(...A)=>e(p).onMouseup&&e(p).onMouseup(...A))},[O(e(Ie),{loop:"",trapped:e(r),"focus-start-el":"container",onFocusAfterTrapped:e(S),onFocusAfterReleased:e(w),onFocusoutPrevented:e(z),onReleaseRequested:e($)},{default:d(()=>[e(u)?(m(),P(We,se({key:0,ref_key:"dialogContentRef",ref:n},s.$attrs,{"custom-class":s.customClass,center:s.center,"align-center":s.alignCenter,"close-icon":s.closeIcon,draggable:e(T),fullscreen:s.fullscreen,"show-close":s.showClose,title:s.title,onClose:e(N)}),ae({header:d(()=>[s.$slots.title?k(s.$slots,"title",{key:1}):k(s.$slots,"header",{key:0,close:e(N),titleId:e(b),titleClass:e(g).e("title")})]),default:d(()=>[k(s.$slots,"default")]),_:2},[s.$slots.footer?{name:"footer",fn:d(()=>[k(s.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):E("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,oo)]),_:3},8,["mask","overlay-class","z-index"]),[[Pe,e(r)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var ao=x(so,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const to=Ne(ao);const no={visible:{type:Boolean},title:{type:String,default:"\u63D0\u793A"},width:{type:[String,Number],default:"50%"},top:{type:String,default:"15vh"},modal:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!1},showClose:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},destroyOnClose:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1}},re={showFooter:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},btnPosition:{type:String,default:"center"},showCancelBtn:{type:Boolean,default:!0},cancelText:{type:String,default:"\u53D6 \u6D88"},showSaveBtn:{type:Boolean,default:!0},saveText:{type:String,default:"\u786E \u8BA4"},showFullscreen:{type:Boolean,default:!0},minHeight:{type:String,default:"auto"},height:{type:String,default:"auto"},modalType:{type:String,default:""},closeConfirm:{type:Boolean,default:!1},closeFun:{type:Function,default:null}},ro=Object.assign({},no,re),uo={key:0,class:"base-dialog-header"},io={key:0},mo=H({__name:"base-dialog",props:ro,emits:["close","save","update:visible"],setup(l,{expose:i,emit:c}){const t=l,g=Le(),{proxy:h}=le(),v=C(!1),n=C(!1),r=C(t.fullscreen),b=C(),f=_(()=>{const o={...Ve(t,Object.keys(re))};return o.modalClass=t.modalType||"",o.showClose=!1,o.fullscreen=e(r),{...o,...g}}),B=_(()=>{const{minHeight:o,height:S}=t;return{minHeight:o,height:e(f).fullscreen?"100%":S}}),a=()=>{n.value=!1,v.value=!0,oe(()=>{L()})},u=()=>{v.value=!1,c("update:visible",!1),c("close")},R=o=>{o==null||o.preventDefault(),o==null||o.stopPropagation(),r.value=!r.value},L=()=>{e(b).wrap$.scrollTop=0},M=async()=>{try{t.closeConfirm&&await h.$messageBox("\u4F60\u786E\u5B9A\u8981\u5173\u95ED\u5F39\u6846\u5417\uFF1F"),u()}catch{}},V=async()=>{ze(t.closeFun)?t.closeFun(u):u()},N=()=>{c("save",o=>{n.value=o})};return Me(()=>{v.value=t.visible}),i({showDialog:a,hideDialog:u}),(o,S)=>{const w=Ue,$=qe,z=He,p=je,T=to;return m(),P(T,se({modelValue:v.value,"onUpdate:modelValue":S[0]||(S[0]=s=>v.value=s)},e(f),{class:"base-dialog","before-close":M}),ae({header:d(({close:s})=>[o.showHeader?(m(),U("div",uo,[o.$slots.title?E("",!0):(m(),U("span",io,q(o.title),1)),k(o.$slots,"title"),O($,{size:14,class:"base-header-icon"},{default:d(()=>[o.showFullscreen?(m(),P(w,{key:0,"svg-name":r.value?"fullOutScreen":"fullScreen",onClick:R,class:"pointer",hover:""},null,8,["svg-name"])):E("",!0),O(w,{"svg-name":"close",class:"pointer",onClick:s,size:19,hover:""},null,8,["onClick"])]),_:2},1024)])):E("",!0)]),default:d(()=>[O(z,{class:"el-scrollbar basic-dialog-body",style:K(e(B)),ref_key:"bodyScrollRef",ref:b},{default:d(()=>[k(o.$slots,"default")]),_:3},8,["style"]),k(o.$slots,"footer")]),_:2},[!o.$slots.footer&&o.showFooter?{name:"footer",fn:d(()=>[j("div",{class:"base-dialog-footer",style:K({"text-align":o.btnPosition})},[o.showCancelBtn?(m(),P(p,{key:0,onClick:V},{default:d(()=>[W(q(o.cancelText),1)]),_:1})):E("",!0),o.showSaveBtn?(m(),P(p,{key:1,type:"primary",onClick:N,loading:n.value},{default:d(()=>[W(q(o.saveText),1)]),_:1},8,["loading"])):E("",!0)],4)]),key:"0"}:void 0]),1040,["modelValue"])}}});export{mo as _,xe as a,Ke as c,Xe as d,eo as u};
