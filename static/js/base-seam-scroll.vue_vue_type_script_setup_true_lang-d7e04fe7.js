import{d as R,r as x,b as L,a0 as P,v as d,g as i,c0 as H,b3 as W,U as $,o as C,c as D,e as w,B as O,D as S,a5 as N}from"./index-bd68377b.js";let b=0;const F="webkit moz ms o".split(" ");let s,l;const j=typeof window>"u";if(j)s=function(){},l=function(){};else{s=window.requestAnimationFrame,l=window.cancelAnimationFrame;let r;for(let a=0;a<F.length&&!(!!s&&!!l);a++)r=F[a],s=s||window[r+"RequestAnimationFrame"],l=l||window[r+"CancelAnimationFrame"]||window[r+"CancelRequestAnimationFrame"];(!s||!l)&&(s=function(a){const o=new Date().getTime(),c=Math.max(0,16-(o-b)),f=window.setTimeout(()=>{a(o+c)},c);return b=o+c,f},l=function(a){window.clearTimeout(a)})}const z={data:{type:Array,default:()=>[]},options:{type:Object,default:()=>{}},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"300px"}},E={autoPlay:!0,switchDelay:400,hoverStop:!0,step:1,singleHeight:0,waitTime:1e3},U=["innerHTML"],Y=R({__name:"base-seam-scroll",props:z,setup(r,{expose:a}){const o=r,c=x(null),f=x(null),e=L({top:0,autoPlay:!1,delay:0,copyHtml:"",isHover:!1,reqFrame:null,singleWaitTime:null});P(()=>{g()});const p=d(()=>Object.assign({},E,o.options)),M=d(()=>i(p).autoPlay?"ease-in":"linear"),y=d(()=>{const{hoverStop:t,autoPlay:n}=i(p);return t&&n&&o.data.length>1}),_=d(()=>{const{width:t,height:n}=o;return{width:H(t)?t:`${t}px`,height:H(n)?n:`${n}px`}}),B=d(()=>({transform:`translateY(${e.top}px)`,transition:`all ${M.value} ${e.delay}ms`,overflow:"hidden"})),g=()=>{var m;const{autoPlay:t,switchDelay:n}=i(p);e.delay=t?0:n,t&&(o.data.length>1?(e.copyHtml=(m=i(f))==null?void 0:m.innerHTML,W(()=>{u()},0)):(e.top=0,h()))},u=()=>{e.isHover||(h(),e.reqFrame=s(()=>{var v;const t=(v=i(c))==null?void 0:v.offsetHeight,{step:n,singleHeight:m,waitTime:q}=i(p);Math.abs(e.top)>=t/2&&(e.top=0),e.top-=n,e.singleWaitTime&&clearTimeout(e.singleWaitTime),m&&Math.abs(e.top)%m<n?e.singleWaitTime=setTimeout(()=>{u()},q):u()}))},A=()=>{i(y)&&(e.isHover=!1,u())},k=()=>{i(y)&&(e.isHover=!0,e.singleWaitTime&&clearTimeout(e.singleWaitTime),h())},h=()=>{l(e.reqFrame||"")},T=()=>{h(),g()};return $(()=>o.data,()=>{N(()=>{T()})},{deep:!0}),a({reset:T}),(t,n)=>(C(),D("div",{style:S(i(_)),class:"hidden"},[w("div",{ref_key:"realBoxRef",ref:c,style:S(i(B)),onMouseenter:k,onMouseleave:A},[w("div",{ref_key:"slotListRef",ref:f,class:"hidden"},[O(t.$slots,"default")],512),w("div",{innerHTML:e.copyHtml,class:"hidden"},null,8,U)],36)],4))}});export{Y as _};
